<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Live Vocab ‚Ä¢ Write & Illustrate (16:9)</title>
<style>
  :root{
    --bg:#f6fbff; --card:#fff; --ink:#1f2a44; --muted:#6b7a90;
    --accent:#5aa6ff; --ok:#2f8f46; --warn:#c0392b;
    --shadow:0 8px 24px rgba(31,42,68,.12); --r:16px;
  }
  *{box-sizing:border-box} html,body{height:100%;margin:0}
  body{background:var(--bg); color:var(--ink); font-family:system-ui,Segoe UI,Roboto,Arial; display:flex; flex-direction:column; align-items:center}

  header{width:100%; max-width:1280px; text-align:center; padding:10px 12px 6px}
  header h1{margin:6px 0 0; font-size:1.2rem}
  header p{margin:2px 0 0; color:var(--muted); font-size:.95rem}

  /* 16:9 stage */
  .stage{
    width:100%; max-width:1280px; aspect-ratio:16/9;
    background:var(--card); border-radius:var(--r); box-shadow:var(--shadow);
    display:grid; grid-template-columns:1.15fr .85fr; overflow:hidden;
  }
  @media (max-width:900px){ .stage{grid-template-columns:1fr; aspect-ratio:auto} }

  .left,.right{padding:14px 16px}
  .left{border-right:2px solid #e7eef8}
  .row{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
  .label{font-size:.92rem; color:var(--muted)}
  .v-in{flex:1; min-width:220px; padding:10px 12px; border:1.5px solid #dbe7ff; border-radius:12px; outline:none; background:#fcfdff}
  .v-in:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(90,166,255,.15)}

  .chips{display:flex; flex-wrap:wrap; gap:8px; margin:10px 0}
  .chip{font-size:.88rem; padding:6px 10px; border-radius:999px; border:1px solid #dbe7ff; background:#f3f8ff; color:#2a518f}
  .chip.used{background:#e8f7e9; border-color:#c7efcb; color:#236e2a}
  .chip.missing{background:#fff3f0; border-color:#ffd6cc; color:#a94220}

  textarea{
    width:100%; height:62%;
    resize:none; padding:12px 12px 56px; line-height:1.5;
    border:1.5px solid #dbe7ff; border-radius:12px; outline:none; background:#fcfdff;
  }
  textarea:focus{border-color:var(--accent); box-shadow:0 0 0 3px rgba(90,166,255,.15)}
  .hint{color:var(--muted); font-size:.92rem; margin:6px 0}

  .controls{display:flex; justify-content:space-between; align-items:center; gap:8px; margin-top:8px}
  .btn{border:none; padding:10px 14px; border-radius:12px; font-size:.95rem; cursor:pointer; box-shadow:0 2px 8px rgba(31,42,68,.1)}
  .btn.primary{background:var(--ink); color:#fff}
  .btn.alt{background:#eef4ff; color:#244c8a}
  .btn.warn{background:#ffe4de; color:#9a2d18}
  .meter{color:var(--muted); font-size:.92rem}

  .title{display:flex; align-items:center; gap:.5rem; font-size:1rem; margin-bottom:8px}
  .title .emoji{font-size:1.1rem}

  /* Drawing */
  .toolbar{display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom:8px}
  .tool{border:1px solid #dbe7ff; background:#f7fbff; padding:8px 10px; border-radius:10px; font-size:.9rem; cursor:pointer}
  .tool.active{outline:2px solid var(--accent)}
  .tool input[type="color"]{border:none; background:transparent; width:28px; height:28px; padding:0}
  .size{width:120px}
  canvas{
    width:100%; height:72%;
    border:1.5px dashed #cfe0fa; background:#fff; border-radius:12px; cursor:crosshair;
    box-shadow:inset 0 0 0 2px #eff5ff;
  }

  footer{width:100%; max-width:1280px; text-align:center; color:var(--muted); font-size:.85rem; padding:8px 0 10px}
</style>
</head>
<body>
  <header>
    <h1>‚úçÔ∏è Write & üé® Illustrate ‚Äî Live Vocabulary</h1>
    <p>Type today‚Äôs vocabulary, write a paragraph, then illustrate your scene.</p>
  </header>

  <main class="stage">
    <!-- LEFT: VOCAB + WRITE -->
    <section class="left">
      <div class="row" aria-label="Vocabulary input row">
        <span class="label">Vocabulary (comma-separated):</span>
        <input id="vocabInput" class="v-in" type="text" placeholder="e.g., erosion, specimen, matrix, paleontologist, crest">
        <button id="applyVocab" class="btn alt" title="Apply words">Apply</button>
        <button id="clearVocab" class="btn warn" title="Clear words">Clear</button>
      </div>

      <div id="chips" class="chips" aria-live="polite"></div>

      <div class="title"><span class="emoji">üìù</span><strong>Write your paragraph</strong></div>
      <p class="hint">Use the vocabulary naturally. 5‚Äì7 sentences is great.</p>
      <textarea id="writer" placeholder="Write your paragraph here‚Ä¶"></textarea>

      <div class="controls">
        <div>
          <button id="clearText" class="btn warn">Clear Text</button>
          <button id="copyText" class="btn primary">Copy Paragraph</button>
        </div>
        <div id="meter" class="meter">Words used: 0 / 0</div>
      </div>
    </section>

    <!-- RIGHT: DRAW -->
    <section class="right">
      <div class="title"><span class="emoji">üé®</span><strong>Illustrate your adventure</strong></div>
      <div class="toolbar">
        <button id="penBtn" class="tool active">Pen</button>
        <button id="eraserBtn" class="tool">Eraser</button>
        <label class="tool">Color <input id="colorPicker" type="color" value="#1f2a44"></label>
        <label class="tool">Size <input id="sizePicker" class="size" type="range" min="1" max="40" value="6"></label>
        <button id="clearCanvasBtn" class="tool">Clear</button>
        <button id="downloadBtn" class="tool">Download</button>
      </div>
      <canvas id="pad" aria-label="Drawing canvas"></canvas>
    </section>
  </main>

  <footer>¬© 2025 Young Learners Curriculum. All rights reserved.</footer>

<script>
  /* ========== Vocabulary logic (live in-class editing) ========== */
  const vocabInput = document.getElementById('vocabInput');
  const applyVocab = document.getElementById('applyVocab');
  const clearVocab = document.getElementById('clearVocab');
  const chips = document.getElementById('chips');
  const writer = document.getElementById('writer');
  const meter = document.getElementById('meter');

  let VOCAB = []; // filled from input

  function parseVocab(text){
    return text.split(',')
      .map(w => w.trim())
      .filter(w => w.length)
      .map(w => w.toLowerCase());
  }

  function renderChips(status=[]){
    chips.innerHTML = '';
    VOCAB.forEach((w,i)=>{
      const span = document.createElement('span');
      span.className = 'chip ' + (status[i] ? 'used' : 'missing');
      span.textContent = w;
      chips.appendChild(span);
    });
    meter.textContent = `Words used: ${(status.filter(Boolean).length||0)} / ${VOCAB.length}`;
  }

  function updateUsage(){
    const text = writer.value.toLowerCase();
    const used = VOCAB.map(w => new RegExp(`\\b${w}\\b`, 'i').test(text));
    renderChips(used);
  }

  applyVocab.addEventListener('click', ()=>{
    VOCAB = parseVocab(vocabInput.value);
    renderChips(VOCAB.map(()=>false));
    updateUsage();
    writer.focus();
  });

  clearVocab.addEventListener('click', ()=>{
    vocabInput.value = '';
    VOCAB = [];
    renderChips([]);
    updateUsage();
  });

  writer.addEventListener('input', updateUsage);

  // Copy & clear text
  document.getElementById('copyText').addEventListener('click', ()=>{
    writer.select(); document.execCommand('copy');
  });
  document.getElementById('clearText').addEventListener('click', ()=>{
    writer.value = ''; updateUsage(); writer.focus();
  });

  /* ========== Drawing canvas (simple pen/eraser) ========== */
  const canvas = document.getElementById('pad');
  const ctx = canvas.getContext('2d');
  const penBtn = document.getElementById('penBtn');
  const eraserBtn = document.getElementById('eraserBtn');
  const colorPicker = document.getElementById('colorPicker');
  const sizePicker = document.getElementById('sizePicker');

  function fitCanvas(){
    const r = canvas.getBoundingClientRect();
    const dpr = window.devicePixelRatio || 1;
    canvas.width = Math.floor(r.width * dpr);
    canvas.height = Math.floor(r.height * dpr);
    ctx.setTransform(dpr,0,0,dpr,0,0);
    ctx.lineCap = 'round'; ctx.lineJoin = 'round';
    ctx.fillStyle = '#fff'; ctx.fillRect(0,0,canvas.width,canvas.height);
  }
  window.addEventListener('resize', fitCanvas);
  fitCanvas();

  let drawing=false, erasing=false;
  function setActive(btn){ [penBtn,eraserBtn].forEach(b=>b.classList.remove('active')); btn.classList.add('active'); }
  penBtn.onclick = ()=>{ erasing=false; setActive(penBtn); };
  eraserBtn.onclick = ()=>{ erasing=true; setActive(eraserBtn); };

  function pos(e){
    const r = canvas.getBoundingClientRect();
    const p = e.touches ? e.touches[0] : e;
    return { x:p.clientX - r.left, y:p.clientY - r.top };
  }
  function start(e){ drawing=true; const {x,y}=pos(e); ctx.beginPath(); ctx.moveTo(x,y); e.preventDefault(); }
  function draw(e){
    if(!drawing) return;
    const {x,y}=pos(e);
    ctx.lineWidth = +sizePicker.value;
    if(erasing){ ctx.globalCompositeOperation='destination-out'; ctx.strokeStyle='rgba(0,0,0,1)'; }
    else { ctx.globalCompositeOperation='source-over'; ctx.strokeStyle = colorPicker.value; }
    ctx.lineTo(x,y); ctx.stroke(); e.preventDefault();
  }
  function end(){ drawing=false; ctx.closePath(); }

  canvas.addEventListener('mousedown', start);
  canvas.addEventListener('mousemove', draw);
  window.addEventListener('mouseup', end);
  canvas.addEventListener('touchstart', start, {passive:false});
  canvas.addEventListener('touchmove', draw, {passive:false});
  canvas.addEventListener('touchend', end);

  document.getElementById('clearCanvasBtn').onclick = ()=>{
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.fillStyle='#fff'; ctx.fillRect(0,0,canvas.width,canvas.height);
  };
  document.getElementById('downloadBtn').onclick = ()=>{
    const a = document.createElement('a'); a.download='drawing.png'; a.href=canvas.toDataURL('image/png'); a.click();
  };
</script>
</body>
</html>
